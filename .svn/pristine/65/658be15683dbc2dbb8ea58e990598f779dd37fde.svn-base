<div class="table">
<table width="100%" border="0" cellspacing="0" cellpadding="0" id="myTable" class="tablesorter">
  <thead>
    <tr>
      <th>Lot No</th>     
      <th>Parcel DEEC No</th>
      <th>Description</th>
      <th>No of Stones</ht>
      <th>Carat</th>
      <th>Price per carat</th>
      <th>Total Bid</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <% @stones.each do |stone| %>
      <tr>
        <td><%= stone.lot_no %></td>
        <td><%= stone.deec_no %></td>
        <td><%= stone.description %></td>
        <td><%= stone.no_of_stones %></td>
        <td><%= stone.weight %></td>
        <% bid = stone.per_carat_bid(current_customer) %>
        <td id="pcb_<%= stone.id %>" ><%= number_to_currency(bid) unless bid.class == String %></td>
        <% total_bid = stone.total_bid(current_customer) %>
        <td id="tb_<%= stone.id %>" ><%= number_to_currency(total_bid) unless total_bid.class == String %></td>
        <td><%= link_to 'Bid', place_new_stone_bids_path(stone.id), :class => 'place_bid' %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>
<script type="text/javascript">

  $(document).ready(function(){

   // $('#myTable1').dataTable({
//    	  
   // });

    $(document).on('click', '.place_bid', function(e){
      e.preventDefault()
      var _this = $(this);
      var top = $(this).position()['top'] - 300;
      var url = $(this).attr('href')
      $.ajax({
        url: url,
        type: 'GET',
        success: function(response){
          $('.bid_form').html(response).show()
         // $('.bid_form').css('margin-top', top + 'px' )
          $('tr').removeClass('current_bid');
          $(_this).parents('tr').addClass('current_bid');
        }
      })
    })

  })

</script>

<style>

.current_bid{
  background-color: #E4E4E4!important;
}

</style>

