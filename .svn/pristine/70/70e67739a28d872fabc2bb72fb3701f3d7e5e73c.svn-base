class TendersController < ApplicationController

  before_filter :authenticate_customer!

  def index
    @tenders = current_customer.tenders.open_tenders(DateTime.now).limit(10)
    @news = News.first(10)
  end

  def show
    @tender = Tender.find(params[:id])
    @bid = Bid.find_or_initialize_by_customer_id_and_tender_id(current_customer.id, @tender.id)
  end

  def history
    @tenders = current_customer.tender_history.limit(10)
    @news = News.first(10)
  end

  def calender
  end

  def calender_data
    start_date = Time.at(params[:start].to_i)
    end_date = Time.at(params[:end].to_i)

    @data = Tender.tenders_for_calender(start_date, end_date)

    render :json => @data.to_json
  end


end

