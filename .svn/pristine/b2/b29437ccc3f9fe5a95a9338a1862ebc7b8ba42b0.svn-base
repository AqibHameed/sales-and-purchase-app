// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require fancybox
//= require_tree .

//Admin Login
$(document).ready(function() {
	$(".footer-inner .c6").click(function() {
		$('#sidebar-share').fadeOut();
		$('#sidebar-features').slideToggle(500);
	});

	$(".footer-inner .c5").click(function() {
		$('#sidebar-features').fadeOut();
		$('#sidebar-share').slideToggle(500);
	});

	//$("#myTable").tablesorter();

});

function addMask() {
	$('body').append("<div id='screenMask'></div>")
}

function removeMask() {
	$('#screenMask').remove();
}

function addStarRatings(id) {
	$('.star').each(function(i) {

		$(this).raty({
			path : '/assets',
			width : 10,
			number : 1,
			hints : ['Important'],
			score : $(this).attr('score'),
			round : {
				down : .25,
				full : .6,
				up : .76
			},
			click : function(score) {
				$.post("/tenders/" + id + "/add_rating", {
					key : $(this).attr('key'),
					id_key : $(this).attr('id_key'),
					value : score
				});
			}
		});
	});
}

function addRead(id) {

	$('.read').each(function(el) {
		var el = el;
		$(this).click(function() {
			$.post("/tenders/" + id + "/add_read", {
				key : $(this).attr('key'),
				id_key : $(this).attr('id')
			});
		});
	});
}

function reloadRaty(id, status) {

	var src = $("#star_" + id).find('img').attr('src');

	if (status == "on") {
		var imageSource = src.replace('off', 'on');

	} else {
		var imageSource = src.replace('on', 'off');
		$('#star_' + id).raty({
			path : '/assets',
			width : 1,
			number : 1,
			hints : ['Important'],
			score : 0,
			round : {
				down : .25,
				full : .6,
				up : .76
			},
			click : function(score) {
				$.post("/tenders/" + id + "/add_rating", {
					key : $(this).attr('key'),
					id_key : $(this).attr('id_key'),
					value : score
				});
			}
		});

	}

	$("#star_" + id).find('img').attr('src', imageSource);

}