class Bid < ActiveRecord::Base

  attr_accessible :total, :message, :bid_date, :customer_id, :tender_id, :no_of_parcels, :price_per_carat

  has_one :winner

  belongs_to :tender
  belongs_to :customer
  belongs_to :stone

  validates_presence_of :total, :customer_id

  before_save :set_bid_date, :set_tender_id

  before_save{|s|
  puts "before save #{s.price_per_carat}"
  }

  before_validation{|s|
  puts "before save #{s.price_per_carat}"
  }

  def set_bid_date
    self.bid_date = DateTime.now
  end

  def set_tender_id
    self.tender_id = self.stone.tender_id
  end

end

