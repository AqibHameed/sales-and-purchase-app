module TendersHelper

  def time_remaining(close_date)
    close_date = close_date.to_date if close_date.is_a?(ActiveSupport::TimeWithZone)
    if close_date < Date.today
      'Closed'
    elsif close_date == Date.today
      'Closing today'
    else
      "#{(close_date - Date.today).to_i} days left"
    end
  end

  def delete_stones_tender_path(id)
    "/tenders/#{id}/delete_stones"
  end

  def bid_confirmation_link(tender, customer)
    if CustomersTender.find_by_tender_id_and_customer_id(tender.id, customer.id).confirmed
      'Confirmation already sent'
    else
       link_to 'Send Confirmation', confirm_bids_tender_path(tender), :method => :put
    end
  end

end

