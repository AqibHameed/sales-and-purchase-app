<div class="table">

  <table width="100%" border="0" cellspacing="0" cellpadding="0" id="myTable"  class="tablesorter" >
    <thead>
      <tr>
        <th>Description</th>
        <th>No. of Stones</th>
        <th>Carats</th>
        <th>Cost</th>
        <th>Box Value</th>
        <th>Sight</th>
        <th>Price</th>
        <th>Credit</th>
        <th>Activity</th>
        <th>Counterparty</th>
        <th>Status</th>
        <th>Invoice Date</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% @transactions.each do |transaction| %>
        <tr class='bg-normal'>
          <td><%= get_description(transaction.trading_parcel) rescue 'N/A'  %></td>
          <td><%= transaction.trading_parcel.no_of_stones rescue 'N/A'  %></td>
          <td><%= number_with_precision(transaction.trading_parcel.weight, precision: 2) rescue 'N/A'  %></td>
          <td><%= transaction.trading_parcel.cost rescue 'N/A'  %></td>
          <td><%= transaction.trading_parcel.box_value rescue 'N/A' %></td>
          <td><%= transaction.trading_parcel.sight rescue 'N/A' %></td>
          <td><%= transaction.price rescue 'N/A' %></td>
          <td><%= transaction.credit rescue 'N/A' %></td>
          <% if @customer.id == transaction.buyer_id %>
            <td>Bought</td>
            <td><%= transaction.supplier.company rescue 'N/A' %></td>
          <% elsif @customer.id == transaction.supplier_id  %>
            <td>Sold</td>
            <td><%= transaction.buyer.company rescue 'N/A' %></td>
          <%else%>
            <td></td>
            <td></td>
          <% end %>
          <td><%= get_status(transaction) %></td>
          <td><%= transaction.created_at.strftime("%B, %d %Y")  %></td>
          <td></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
<script>$("#myTable").tablesorter();</script>