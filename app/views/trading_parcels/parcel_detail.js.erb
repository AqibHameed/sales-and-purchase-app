$('.parcel-detail').html("<%= j render 'parcel_visibility' %>")
$('#for_sale_modal').modal('show')


if($('#sale_all').is(':checked')){
  $('.for_sale').not('#sale_all').attr('checked', false);
  $('#sale_broker').attr('disabled', true)
  $('#sale_none').attr('disabled', true)
  $('#sale_credit').attr('disabled', true)
  $('#sale_demanded').attr('disabled', true)
}else if($('#sale_none').is(':checked')){
  $('.for_sale').not('#sale_none').attr('checked', false);
  $('#sale_broker').attr('disabled', true)
  $('#sale_all').attr('disabled', true)
  $('#sale_credit').attr('disabled', true)
  $('#sale_demanded').attr('disabled', true)
}else if($('#sale_broker').is(':checked')){
  $('.for_sale').not('#sale_broker').attr('checked', false);
  $('#sale_none').attr('disabled', true)
  $('#sale_all').attr('disabled', true)
  $('#sale_credit').attr('disabled', true)
  $('#sale_demanded').attr('disabled', true)
}else if($('#sale_demanded').is(':checked')){
  $('.for_sale').not('#sale_demanded').attr('checked', false);
  $('#sale_none').attr('disabled', true)
  $('#sale_all').attr('disabled', true)
  $('#sale_broker').attr('disabled', true)
  $('#sale_credit').attr('disabled', false)
}else if($('#sale_credit').is(':checked')){
  $('.for_sale').not('#sale_credit').attr('checked', false);
  $('#sale_none').attr('disabled', true)
  $('#sale_all').attr('disabled', true)
  $('#sale_broker').attr('disabled', true)
  $('#sale_demanded').attr('disabled', false)
}


$('.broker-select').select2({})
  $('.broker-select').on("change", function (e) {
    broker_ids = $(this).val();
    parcel_id = $(this).data('id')
    $.ajax({
      url : '/share_with_brokers',
      data : { broker_ids: broker_ids, id: parcel_id }
    });
  })